test_cases:

  # Unit Tests

  - id: AC_UT_01

    title: "return error message when: <productCategoryName> is provided as non-string, <activeStatuses> is provided as non-array, <productCategoryAncestors> is provided as non-array, <page> is provided as non-integer, <size> is provided as non-integer"

    input:

      productCategoryName: 123

      activeStatuses: "abc"

      productCategoryAncestors: 

        - 2

      tenantId: 11

      page: "abc"

      size: "abc"

    expected:

      errors:

        - field: productCategoryName

          value: 123

          messageKey: validation_error.wrong_type_string

        - field: activeStatuses

          value: "abc"

          messageKey: validation_error.wrong_type_array

        - field: productCategoryAncestors

          value: 2

          messageKey: validation_error.wrong_type_array

        - field: page

          value: "abc"

          messageKey: validation_error.wrong_type_integer

        - field: size

          value: "abc"

          messageKey: validation_error.wrong_type_integer



  - id: AC_UT_02

    title: "return error message when: <activeStatuses> array contains duplicate elements"

    input:

      productCategoryName: "123v"

      activeStatuses: [1, 1]

      productCategoryAncestors: [1]

      tenantId: 11

      page: 1

      size: 20

    expected:

      error:

        - field: activeStatuses

          value: [1, 1]

          messageKey: validation_error.array_duplicate_items



  - id: AC_UT_03

    title: "return successful message when valid data is provided"

    input:

      productCategoryName: "Điện thoại 123"

      productCategoryAncestors: [1, 2]

      tenantId: 11

      page: 1

      size: 20

    expected:

      - messageKey: success.query


  # Integration Tests

  - id: AC_IT_01

    title: "return successful message when: <productCategoryName> is <valid value> and <activeStatuses> is <default_value>"

    input:

      productCategoryName: "Điện thoại 123"

      productCategoryAncestors: [1]

      tenantId: 11

      page: 1

      size: 20

    expected:

      - messageKey: success.query



  - id: AC_IT_02

    title: "return successful message when: <productCategoryAncestors> is <valid value> and <activeStatuses> is <valid value>"

    input:

      productCategoryName: "123"

      activeStatuses: [0]

      productCategoryAncestors: [1]

      tenantId: 11

      page: 1

      size: 20

    expected:

      - messageKey: success.query


  # End-to-End Tests

  - id: AC_E2E_01

    title: "return successful response when user inputs valid data"

    input:

      auth:

        access_token: "{{token_valid}}"

      productCategoryName: "Điện thoại 123"

      activeStatuses: [1, 0]

      productCategoryAncestors: [1]

      tenantId: 11

      page: 1

      size: 20

    expected:

      message: "List productCategory is searched successfully"

      timestamp: "YYYY-MM-DDThh:mm:ss+TZ"

      data:

        total: 2

        page: 1

        size: 20

        items:

          - productCategories:

              - productCategoryId: 1

                productCategoryName: "Điện thoại 123"

                productCategoryParentId: null

                productCategoryGrandParentId: null

                productCategoryGrandParentName: null

                creatorName: "TaTV"

                createdAt: "2025-11-21T15:16:33+07:00"

                activeStatus: 1

              - productCategoryId: 2

                productCategoryName: "Điện thoại 12311111"

                productCategoryParentId: 1

                productCategoryGrandParentId: null

                productCategoryGrandParentName: null

                creatorName: "NhanNT"

                createdAt: "2025-11-21T15:16:33+07:00"

                activeStatus: 0



  - id: AC_E2E_02

    title: "return successful response when user inputs valid data but no data is matched"

    input:

      auth:

        access_token: "{{token_valid}}"

      productCategoryName: "Tên danh mục không tồn tại XYZ"

      activeStatuses: []

      productCategoryAncestors: []

      tenantId: 11

      page: 1

      size: 20

    expected:

      message: "List productCategory is searched successfully"

      timestamp: "2025-11-21T15:16:33+07:00"

      data:

        total: 0

        page: 1

        size: 20

        items:

          - productCategories: []



  - id: AC_E2E_03

    title: "return error response when user inputs invalid data"

    input:

      auth:

        access_token: "{{token_valid}}"

      productCategoryName: "123"

      activeStatuses: "1"

      productCategoryAncestors: [1]

      tenantId: 11

      page: 1

      size: 20

    expected:

      title: "Lỗi xác thực dữ liệu"

      detail: "Dữ liệu đầu vào không hợp lệ. Vui lòng kiểm tra lại các trường thông tin."

      status: 422

      messageKey: validation_error.general

      errors:

        - field: productCategoryName

          value: 123

          message: "productCategoryName must be string."



  - id: AC_E2E_04

    title: "return error response when Token is expired"

    input:

      auth:

        access_token: null

      productCategoryName: "Điện thoại 123"

      activeStatuses: [1]

      productCategoryAncestors: [1]

      tenantId: 11

      page: 1

      size: 20

    expected:

      title: "Token is expired"

      detail: "Phiên đăng nhập đã kết thúc vào lúc :expiredAt. Vui lòng đăng nhập lại."

      status: 401

      messageKey: auth_error.auth_token_expired



  - id: AC_E2E_05

    title: "return error response when Permission is denied"

    input:

      auth:

        access_token: "{{token_no_scope}}"

      productCategoryName: "Điện thoại 123"

      activeStatuses: [1]

      productCategoryAncestors: [1]

      tenantId: 11

      page: 1

      size: 20

    expected:

      title: "Permission is denied"

      detail: "Bạn không có quyền :permission cần thiết để thực hiện hành động này."

      status: 403

      messageKey: auth_error.forbidden
